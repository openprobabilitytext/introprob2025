\usepackage{booktabs}
\usepackage{empheq}
\setcounter{secnumdepth}{2}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{caption}
\captionsetup[figure]{font=small, labelfont=bf, justification=justified} % Improved caption styling

\usepackage{color}
\usepackage{colortbl}
\usepackage{xcolor}
\usepackage{xr}

\usepackage{fancyvrb}
\usepackage{framed}
\setlength{\fboxsep}{.8em}

\usepackage{graphicx}
\usepackage{multirow}
\usepackage{tabularx}

\usepackage{setspace}
\usepackage{scalefnt}

\usepackage{verbatim}
\usepackage{pdfpages}
\usepackage{mdframed}

\definecolor{newgray}{rgb}{0.9, 0.9, 0.9}

% Custom environment for background box
\newmdenv[
  backgroundcolor=newgray,
  skipabove=10pt,
  skipbelow=10pt,
  leftmargin=0,
  rightmargin=0,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=10pt,
  innerbottommargin=10pt
]{graybox}

\newenvironment{blackbox}{
  \definecolor{shadecolor}{rgb}{0, 0, 0}  % black
  \color{white}
  \begin{shaded}}
 {\end{shaded}}

% Margins setup - ensure same margins on all pages
\usepackage[
  top=1in,
  bottom=1.2in,
  left=1in,
  right=1in,
  heightrounded,
  a4paper
]{geometry}

% Center all figures by default
\usepackage{float}
\floatplacement{figure}{H}

% Adjust figure width and space around it
\setlength{\belowcaptionskip}{-10pt}  % Decrease space after figures
\setlength{\abovecaptionskip}{10pt}   % Space before captions

% Allow scaling for large images
\setkeys{Gin}{width=0.75\textwidth}

% Reduce space between paragraphs
\setlength{\parskip}{1.5mm}

\renewcommand{\hrulefill}{%
  \leavevmode\leaders\hrule height 2pt\hfill\kern0pt }

\renewcommand{\dotfill}{%
  \leavevmode\cleaders\hbox to 0.60em{\hss .\hss }\hfill\kern0pt }

\usepackage{makeidx}
\makeindex
